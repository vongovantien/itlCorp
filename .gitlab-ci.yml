variables:
  PROJECT_PATH: "$CI_PROJECT_DIR"
  APP_OUTPUT_PATH: "$CI_PROJECT_DIR/dist/uat/eFMS-en"

image: node:12

cache:
  paths:
    - ./WebApp/node_modules
    - ./WebApp/package-lock.json
stages:
  - build
  # - deploy

job_build:
  stage: build
  script:
    - node --version
    - echo "start job_build"
    - cd WebApp
    - npm install
    - npm install -g @angular/cli
    - ng version
    #- node_modules/.bin/ng build --c=uat-en
    - npm run build:uat:en
    - echo "job_build doing something..."
    - echo "end job_build"
  only:
    - uat/29-05-2021-sprint24
  artifacts:
    name: "angular_build"
    paths:
      - $APP_OUTPUT_PATH
# job_deploy:
#   stage: deploy
#   script:
#     - echo "deploying to iis",
#     - mkdir $APP_OUTPUT_PATH/test
#     - cp -R ./dist/init-angular-project $APP_OUTPUT_PATH/test
#     - echo "done deploy"
