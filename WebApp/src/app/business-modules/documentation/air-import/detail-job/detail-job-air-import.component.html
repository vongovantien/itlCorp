<div class="sea-fcl-export-detail-job-page">
    <app-sub-header>
        <job-detail-button-list [shipmentDetail]="shipmentDetail" [isDuplicate]="isDuplicate"
            [selectedTab]="selectedTab" (onCancel)="onCancelDeactivate()" (onDelete)="prepareDeleteJob()"
            (onDuplicate)="showDuplicateConfirm()" (onSave)="onSaveJob()" (onPreviewPL)="previewPLsheet($event)"
            (onLock)="lockShipment()">
        </job-detail-button-list>
    </app-sub-header>
</div>

<div class="m-content">
    <div class="m-portlet__body">
        <tabset class="custom-class-tab">
            <tab heading="Shipment Detail" (selectTab)="onSelectTab('shipment')" [active]="selectedTab === 'SHIPMENT'">
                <app-form-create-air type='import'>
                    <div class="row m--margin-top-20" *ngIf="!!shipmentDetail">
                        <div class="col-md-4">
                            <span>Created: {{shipmentDetail.datetimeCreated | date: 'dd/MM/yyyy HH:mm'}} by </span>
                            <span class="text-success">{{shipmentDetail.userNameCreated}}</span>
                        </div>
                        <div class="col-md-4">
                            <span>Modified: {{shipmentDetail.datetimeModified | date: 'dd/MM/yyyy HH:mm'}} by
                            </span> <span class="text-success">{{shipmentDetail.userNameModified}}</span>
                        </div>
                        <ng-container *ngIf="!shipmentDetail.isLocked">
                            <div class="col-md-4 text-right" *ngIf="shipmentDetail.permission.allowUpdate">
                                <!-- <button class="btn btn-info  m-btn--icon m-btn--uppercase" type="button"
                                    (click)="showSyncHBL()">
                                    <span><i class="la la-refresh"></i>
                                        <span> Sync HBL </span>
                                    </span>
                                </button> -->
                                <div class="dropdown m-dropdown m-dropdown--inline">
                                    <button class="btn btn-info dropdown-toggle" type="button" data-toggle="dropdown">
                                        Generate Infor<span class="caret"></span>
                                    </button>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item pointer" (click)="showSyncHBL()">Sync HAWB</a>
                                        <a class="dropdown-item pointer" (click)="showUpdateFlightInfo()">Flight
                                            Infor</a>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </app-form-create-air>
                <grant-total-profit></grant-total-profit>
            </tab>
            <tab heading="HAWB List" (selectTab)="onSelectTab('hbl')" [active]="selectedTab === 'HBL'"
                [disabled]="ACTION === 'COPY'">
                <ng-container *ngIf="selectedTab === 'HBL'">
                </ng-container>
            </tab>
            <tab heading="Debit Note & Credit Note" (selectTab)="onSelectTab('cdNote')" [disabled]="ACTION === 'COPY'"
                [active]="selectedTab === 'CDNOTE'">
                <ng-container *ngIf="selectedTab === 'CDNOTE'" loadModule="AirImport_cdNote">
                </ng-container>
            </tab>
            <tab heading="Assignment" (selectTab)="onSelectTab('assignment')" [active]="selectedTab === 'ASSIGNMENT'"
                [disabled]="ACTION === 'COPY'">
                <ng-container *ngIf="selectedTab === 'ASSIGNMENT'" loadModule="AirImport_assignment">
                </ng-container>
            </tab>
            <tab heading="Attach Files" (selectTab)="onSelectTab('files')" [active]="selectedTab === 'FILES'"
                [disabled]="ACTION === 'COPY'">
                <ng-container *ngIf="selectedTab === 'FILES'" loadModule="AirImport_attachFile">
                </ng-container>
            </tab>
            <tab heading="Advance/Settlement" (selectTab)="onSelectTab('advance-settle')"
                [active]="selectedTab === 'ADVANCE-SETTLE'" [disabled]="isDuplicate">
                <ng-container *ngIf="selectedTab === 'ADVANCE-SETTLE'" loadModule="Share_advanceSettle">
                </ng-container>
            </tab>
        </tabset>
    </div>

    <ul class="m-nav-sticky fms-shipment-sidebar" *ngIf="ACTION !== 'COPY'">
        <li class="m-nav-sticky__item">
            <a title="Preview Shipment Cover Page" style="cursor: pointer;" (click)="previewShipmentCoverPage()">CP</a>
        </li>
    </ul>
</div>

<ng-template #lockTpl>
    <span *ngIf="!!shipmentDetail && !!shipmentDetail.isLocked" class="m--margin-right-10 align-middle">
        <i class="fa fa-lock text-danger fa-3x"></i>
    </span>
</ng-template>

<ng-template inject></ng-template>

<!-- <confirm-popup #confirmPopup body="Do you want to update Flight Info to HBL List" (onSubmit)="updateFlightInfor()">
</confirm-popup> -->