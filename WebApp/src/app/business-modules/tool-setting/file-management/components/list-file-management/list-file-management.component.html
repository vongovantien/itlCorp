<div class="m-portlet">
    <div class="m-form">
        <div class="m-portlet__body">
            <div class="table-wrapper table-scrollable">
                <table class="table table-hover dataTable table-brand ">
                    <thead app-table-header [headers]="headers"
                        (onClick)="sortFile($event.sortField, $event.order)"
                        >
                        <!-- <th class="first table-actions-col">Action</th> -->
                        <th class="first table-actions-col">
                            Stt
                        </th>
                    </thead>
                    <tbody>
                        <ng-container *ngIf="!!listEdocFile?.data?.length">
                            <tr class="collapse-toggle-row" [contextMenu]="fileManageContext" (onTouch)="onSelectFile(edocFile)"
                                *ngFor="let edocFile of listEdocFile?.data ;let i = index; trackBy: trackByFn">

                                <!-- <td class="table-actions-col">
                                    <div class="table-actions" style="width: 70px">
                                        <app-permission-button (onClick)="onDeleteEdoc(edocFile.id)" type="delete">
                                        </app-permission-button>
                                        <app-permission-button (onClick)="downloadEdoc(edocFile)" type="download">
                                        </app-permission-button>
                                    </div>
                                </td> -->
                                <td>{{i + 1}}</td>
                                <td>
                                    <a class="text-underline htmlLink" (click)="viewEdocFromName(edocFile.imageUrl)"
                                    download>{{edocFile.systemFileName}}
                                    <icon-file [url]="edocFile.imageUrl"></icon-file>
                                </a>
                                <td>{{edocFile.documentType}}</td>
                                <td>{{edocFile.jobRef}}</td>
                                <td>{{edocFile.hblNo}}</td>
                                <td>{{edocFile.billingNo}}</td>
                                <td *ngIf="tabType==='Acc'">
                                    <ng-container *ngFor="let acRef of edocFile.acRef ;let i = index; trackBy: trackByFn">
                                        <span [ngClass]="'badge badge-primary'">
                                            {{acRef}}
                                        </span>
                                    </ng-container>
                                </td>
                                <!-- <td >{{edocFile.acRef}}</td> -->
                                <td>{{edocFile.source}}</td>
                                <td>{{edocFile.type}}</td>
                                <td>{{edocFile.userFileName}}</td>
                                <td>{{edocFile.datetimeCreated| date: 'dd/MM/yyyy'}}</td>
                                <td><span class="text-success">{{edocFile.userCreated}}</span></td>
                            </tr>
                        </ng-container>
                        <tr app-table-none-record *ngIf="!listEdocFile?.data?.length">
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- <app-pagination (onChange)="updatePagingData($event)" [total]="listEdocFile.totalItems" [pageNum]="listEdocFile.page"
                [itemPerPage]="listEdocFile.pageSize"></app-pagination> -->
            <app-pagination [total]="totalItems" [pageNum]="page" [itemPerPage]="pageSize"
                (onChange)="updatePagingEdocFile($event)"></app-pagination>
        </div>
    </div>
</div>

<!-- <confirm-popup body="Do you want to delete?" (onSubmit)="deleteEdoc()"></confirm-popup> -->

<app-context-menu #fileManageContext (clickOutside)="selectedFile = null">
    <ng-container>
        <div class="menu-context__item" (click)="viewFileEdoc()">
            <span><i class="la la-eye align-middle text-primary"></i>View</span>
        </div>
        <div class="menu-context__item" (click)="downloadEdoc()">
            <span><i class="la la-download align-middle text-primary"></i><span>Download</span></span>
        </div>
        <!-- <div class="menu-context__item {{(selectedFile?.userCreated === currentUser.userName && !readonly) === false ? 'disabled':''}}"
        (click)="confirmDelete()">
        <span><i class="la la-trash align-middle text-danger"></i>Delete</span>
    </div>-->
    </ng-container>
</app-context-menu>

<ng-template inject></ng-template>
