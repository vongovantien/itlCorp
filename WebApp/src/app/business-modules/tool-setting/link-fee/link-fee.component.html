<div class="m-subheader">
    <div class="d-flex align-items-center">
        <div class="mr-auto">
            <app-breadcrumb></app-breadcrumb>
        </div>
        <div class="c-button-actions">
            <app-permission-button title="Create Rule Link" (onClick)="showCreateRule()"></app-permission-button>
            <div class="dropdown m-dropdown m-dropdown--inline no-arrow">
                <app-permission-button data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Import"
                    type="import">
                </app-permission-button>
            </div>
        </div>
    </div>
    <app-form-search-rule></app-form-search-rule>
    <div class="table-wrapper">
        <table class="table table-striped table-brand dataTable">
            <thead app-table-header [headers]="headers" (onClick)="sortBy($event.sortField ? $event.sortField : '')">
                <th class="first table-actions-col"></th>
            </thead>
            <tbody>
                <ng-container *ngIf="!!rules.length">
                    <tr class=""
                        *ngFor="let rule of rules | filter : keyword : ['ruleName','ruleType','customerID','supplierID','serviceMode','status']; let i = index; trackBy: trackByFn">

                        <td class="table-actions-col">
                            <div class="table-actions" style="width: 70px">
                                <app-permission-button type="detail" (onClick)="getRuleDetail(rule.id)">
                                </app-permission-button>
                                <ng-container>
                                    <app-permission-button type="delete" (onClick)="deleteRule(rule)">
                                    </app-permission-button>
                                </ng-container>
                            </div>
                        </td>

                        <td>{{rule.nameRule}}</td>
                        <td>{{rule.serviceBuying}}</td>
                        <td>{{rule.chargeNameBuying }}</td>
                        <td>{{rule.partnerNameBuying}}</td>
                        <td>{{rule.serviceSelling}}</td>
                        <td>{{rule.chargeNameSelling}}</td>
                        <td>{{rule.partnerNameSelling}}</td>
                        <td>{{rule.userNameCreated}}</td>
                        <td>{{rule.datetimeModified | date: 'dd/MM/yyyy'}}</td>
                        <td [ngClass]="rule.status ? 'text-success' : 'text-danger'">
                            {{rule.status ? 'Active' : 'Inactive'}}</td>
                        <td>{{rule.effectiveDate | date: 'dd/MM/yyyy'}}</td>
                        <td>{{rule.expirationDate | date: 'dd/MM/yyyy'}}</td>

                    </tr>
                </ng-container>
                <tr app-table-none-record *ngIf="!isLoading && !rules.length" [colspan]="headers.length + 1"></tr>
                <tr app-table-row-loading *ngIf="isLoading"></tr>
            </tbody>
        </table>
    </div>

    <confirm-popup body="Do you want to delete?" (onSubmit)="onDeleteRule()"></confirm-popup>
    <form-rule #formAddRule></form-rule>