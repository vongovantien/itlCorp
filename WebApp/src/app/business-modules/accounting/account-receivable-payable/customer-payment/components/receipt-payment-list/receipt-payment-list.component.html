<div class="form-receipt-invoices">
    <div [formGroup]="form" class="m-form m-form--state">
        <div class="row">
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Payment Date</label>
                    <div class="m-input-icon m-input-icon--right down daterange-rtl">
                        <input type="text" class="form-control m-input m-input--square" ngxDaterangepickerMd
                            [locale]="{applyLabel: 'apply', format: 'DD/MM/YYYY'}" [singleDatePicker]="true"
                            name="daterange" placeholder="Select request date" [autoApply]="true"
                            formControlName="paymentDate" readonly calendar
                            (datesUpdated)="onSelectDataFormInfo($event,'payment-date')" [attr.disabled]="isReadonly" />
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Payment Method</label>
                    <ng-select [items]="paymentMethods" formControlName="paymentMethod" class="custom" name="method"
                        [clearable]="false" [readonly]="isReadonly" (change)="getBankAccountNo($event)">
                    </ng-select>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Currency</label>
                    <ng-select formControlName="currencyId" class="custom" [items]="$currencyList | async" bindLabel="id"
                        bindValue="id" (change)="onSelectDataFormInfo($event,'currency')" [clearable]="false"
                        [readonly]="isReadonly">
                    </ng-select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Bank Acount No</label>
                    <input type="text" class="form-control m-input m-input--square" formControlName="bankAccountNo"
                        [attr.readOnly]="isReadonly">
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Cus Advance Amount</label>
                    <input class="form-control" type="number" formControlName="cusAdvanceAmount" numeric [decimals]="2"
                        autoFormatCurrency [attr.readOnly]="isReadonly" (ngModelChange)="getFinalPaidAmount()">
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label" required> Exchange Rate </label>
                    <input type="number" class="form-control m-input m-input--square" formControlName="exchangeRate"
                        [attr.readOnly]="isReadonly" numeric [decimals]="0" autoFormatCurrency>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-2">
                <div class="form-group">
                    <label class="form-control-label">Credit Amount VND</label>
                    <input class="form-control" type="number" formControlName="amountVND" numeric [decimals]="0"
                        autoFormatCurrency [attr.readOnly]="isReadonly" (change)="getFinalPaidAmount()">
                </div>
            </div>
            <div class="col-lg-2">
                <div class="form-group">
                    <label class="form-control-label">Credit Amount USD</label>
                    <input class="form-control" type="number" formControlName="amountUSD" numeric [decimals]="2"
                        autoFormatCurrency [attr.readOnly]="isReadonly" (change)="getFinalPaidAmount()">
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group" >
                        <label class="form-control-label" required>Paid Amount VND</label>
                        <input type="text" class="form-control m-input m-input--square text-success"
                            formControlName="paidAmountVND" numeric [decimals]="0" autoFormatCurrency
                            [attr.readOnly]="isReadonly" (change)="onSelectDataFormInfo($event,'paid-amountVnd');getFinalPaidAmount()">
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label" required>Paid Amount USD</label>
                    <input type="text" class="form-control m-input m-input--square text-success"
                        formControlName="paidAmountUSD" numeric [decimals]="2" autoFormatCurrency
                        [attr.readOnly]="isReadonly" (change)="onSelectDataFormInfo($event,'paid-amountUsd');getFinalPaidAmount()">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <label class="form-control-label">Final Paid Amount USD {{finalPaidAmountUSD.value}}</label>
                <!-- <span *ngIf="currencyId.value !== 'VND'">{{cusAdvanceAmount + amountUSD + paidAmountUSD}}</span> -->
            </div>
            <div class="col-lg-6">
                <label class="form-control-label">Final Paid Amount VND {{finalPaidAmountVND.value}}</label>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="form-group">
                    <label class="form-control-label">Description</label>
                    <textarea cols="30" rows="5" class="form-control" formControlName="description"
                        [attr.readOnly]="isReadonly"></textarea>
                </div>
            </div>
        </div>
        <!-- <div class="row">
                <div class="col-lg-{{syncInfoTemplate ? 8 : 12}}">
                    <div class="form-group">
                        <label class="form-control-label">Description</label>
                        <textarea cols="30" rows="5" class="form-control" formControlName="description"
                            [attr.readOnly]="isReadonly"></textarea>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="form-group">
                        <label class="form-control-label"></label>
                        <ng-container *ngTemplateOutlet="syncInfoTemplate"></ng-container>
                    </div>
                </div>
            </div> -->
    </div>
    <div class="row"></div>
    <div class="row m--margin-top-20">
        <ng-container *ngIf="!isReadonly">
            <div class="col-lg-12 m--align-left d-flex align-items-center justify-content-between">
                <div>
                    <button class="btn btn-info m-btn--icon m-btn--uppercase m--margin-right-10" type="button"
                        (click)="processClear()">
                        <span>
                            <i class="la la-refresh"></i>
                            <span> Process Clear </span>
                        </span>
                    </button>
                    <button class="btn btn-danger m-btn--icon m-btn--uppercase m--margin-right-10" type="button"
                        (click)="showConfirmPopup()">
                        <span>
                            <i class="la la-trash"></i>
                            <span> Remove </span>
                        </span>
                    </button>
                    <button class="btn btn-success m-btn--icon m-btn--uppercase m--margin-right-10" type="button"
                        (click)="insertAdvanceRowData()">
                        <span>
                            <i class="la la-plus"></i>
                            <span> Add Adv </span>
                        </span>
                    </button>
                </div>
            </div>
        </ng-container>
        <div class="col-lg-12 m--margin-top-20">
            <customer-payment-receipt-debit-list></customer-payment-receipt-debit-list>
            <customer-payment-receipt-credit-list></customer-payment-receipt-credit-list>
        </div>
    </div>
</div>
<confirm-popup body="Some Debit Values will change, do you want to remove you selections?" (onSubmit)="removeReceiptItem()"
[labelCancel]="'No'" [labelConfirm]="'Yes'" title="Confirm Remove"></confirm-popup>
<!-- <ng-template #tableInvoice>
    <table class="table table-hover table-brand dataTable table-hover">
        <thead app-table-header [headers]="headerReceiptReadonly">
        </thead>
        <tbody>
            <ng-container *ngIf="!!invoices.length">
                <ng-container *ngFor="let invoice of invoices; let i = index; trackBy: trackByFn">
                    <tr [class.selected-row]="invoice.type === 'ADV'">
                        <td class="text-primary">{{invoice.invoiceNo}}</td>
                        <td class="text-primary">{{invoice.serieNo}}</td>
                        <td>{{invoice.type}}</td>
                        <td class="text-info">{{invoice.partnerName}}</td>
                        <td>{{invoice.taxCode}}</td>
       
                        <td>
                            {{invoice.paidAmount | number: '.0-3'}}
                        </td>
                        <td class="text-left">{{invoice.receiptExcInvoiceBalance | number: '.0-3'}}
                        </td>
                        <td>
                            <ng-container [ngSwitch]="invoice.paymentStatus">
                                <ng-container *ngSwitchCase="'Paid'">
                                    <span class="text-success">Paid</span>
                                </ng-container>
                                <ng-container *ngSwitchCase="'Unpaid'">
                                    <span class="text-danger">Unpaid</span>
                                </ng-container>
                                <ng-container *ngSwitchCase="'Paid A Part'">
                                    <span class="text-warning">Paid A Part</span>
                                </ng-container>
                                <ng-container *ngSwitchDefault>
                                    {{invoice.paymentStatus}}
                                </ng-container>
                            </ng-container>
                        </td>
                        <td>{{invoice.billingDate | date: 'dd/MM/yyyy'}}</td>
                        <td>{{invoice.invoiceDate | date: 'dd/MM/yyyy'}}</td>
                        <td>
                            <input type="text" class="form-control" [(ngModel)]="invoice.note">
                        </td>
                    </tr>
                </ng-container>
            </ng-container>
            <tr app-table-none-record *ngIf="!(isLoading | async) && !invoices.length">
            </tr>
            <tr app-table-row-loading *ngIf="isLoading | async"></tr>
        </tbody>
    </table>
</ng-template> -->
