<div class="form-receipt-invoices">
    <div [formGroup]="form" class="m-form m-form--state">
        <div class="row">
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Payment Date</label>
                    <div class="m-input-icon m-input-icon--right down daterange-rtl">
                        <input type="text" class="form-control m-input m-input--square" ngxDaterangepickerMd
                            [locale]="{applyLabel: 'apply', format: 'DD/MM/YYYY'}" [singleDatePicker]="true"
                            name="daterange" placeholder="Select request date" [autoApply]="true"
                            formControlName="paymentDate" readonly calendar
                            (datesUpdated)="onSelectDataFormInfo($event,'payment-date')" [attr.disabled]="isReadonly" />
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Payment Method</label>
                    <ng-select [items]="paymentMethods" formControlName="paymentMethod" class="custom" name="method"
                        [clearable]="false" [readonly]="isReadonly" (change)="getBankAccountNo($event)">
                    </ng-select>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Currency</label>
                    <ng-select formControlName="currencyId" class="custom" [items]="$currencyList | async"
                        bindLabel="id" bindValue="id" (change)="onSelectDataFormInfo($event,'currency')"
                        [clearable]="false" [readonly]="isReadonly">
                    </ng-select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Bank Acount No</label>
                    <input type="text" class="form-control m-input m-input--square" formControlName="bankAccountNo"
                        [attr.readOnly]="isReadonly">
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label">Cus Advance Amount</label>
                    <input class="form-control" type="number" formControlName="cusAdvanceAmount" numeric [decimals]="2"
                        autoFormatCurrency [attr.readOnly]="isReadonly"
                        (change)="onSelectDataFormInfo($event,'cusAdvanceAmount')">
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group" [ngClass]="{'m-form__group has-danger':isSubmitted && !exchangeRate.valid }">
                    <label class="form-control-label" required> Exchange Rate </label>
                    <input type="number" class="form-control m-input m-input--square" formControlName="exchangeRate"
                        [attr.readOnly]="isReadonly" numeric [decimals]="0" autoFormatCurrency>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-2">
                <div class="form-group">
                    <label class="form-control-label">Credit Amount VND</label>
                    <input class="form-control" type="number" formControlName="amountVND" numeric [decimals]="0"
                        autoFormatCurrency [attr.readOnly]="isReadonly"
                        (change)="onSelectDataFormInfo($event,'amountVND')">
                </div>
            </div>
            <div class="col-lg-2">
                <div class="form-group">
                    <label class="form-control-label">Credit Amount USD</label>
                    <input class="form-control" type="number" formControlName="amountUSD" [decimals]="2"
                        autoFormatCurrency [attr.readOnly]="isReadonly"
                        (change)="onSelectDataFormInfo($event,'amountUSD')">
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group" [ngClass]="{'m-form__group has-danger':isSubmitted && !paidAmountVND.valid }">
                    <label class="form-control-label" required>Paid Amount VND</label>
                    <input type="number" class="form-control m-input m-input--square text-success"
                        formControlName="paidAmountVND" autoFormatCurrency [attr.readOnly]="isReadonly"
                        (change)="onSelectDataFormInfo($event,'paid-amountVnd')">
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group" [ngClass]="{'m-form__group has-danger':isSubmitted && !paidAmountUSD.valid }">
                    <label class="form-control-label" required>Paid Amount USD</label>
                    <input type="number" class="form-control m-input m-input--square text-success"
                        formControlName="paidAmountUSD" autoFormatCurrency [attr.readOnly]="isReadonly"
                        (change)="onSelectDataFormInfo($event,'paid-amountUsd')">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-{{syncInfoTemplate ? 8 : 12}}">
                <div class="row">
                    <div class="col-lg-6">
                        <label class="form-control-label">Final Paid Amount USD</label>
                        <input type="text" class="form-control m-input m-input--square text-primary"
                            formControlName="finalPaidAmountUSD" currencyMask [attr.disabled]="true">
                    </div>
                    <div class="col-lg-6">
                        <label class="form-control-label">Final Paid Amount VND</label>
                        <input type="text" class="form-control m-input m-input--square text-primary"
                            formControlName="finalPaidAmountVND" currencyMask [attr.disabled]="true">
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="form-group">
                            <label class="form-control-label">Description</label>
                            <textarea cols="30" rows="5" class="form-control" formControlName="description"
                                [attr.readOnly]="isReadonly"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="form-control-label"></label>
                    <ng-container *ngTemplateOutlet="syncInfoTemplate"></ng-container>
                </div>
            </div>
        </div>

    </div>
    <ng-content> </ng-content>

    <div class="row m--margin-top-20">
        <ng-container *ngIf="!isReadonly">
            <div class="col-lg-12 m--align-left d-flex align-items-center justify-content-between">
                <div>
                    <button class="btn btn-info m-btn--icon m-btn--uppercase m--margin-right-10" type="button"
                        (click)="processClear()">
                        <span>
                            <i class="la la-refresh"></i>
                            <span> Process Clear </span>
                        </span>
                    </button>

                    <button class="btn btn-warning m-btn--icon m-btn--uppercase m--margin-right-10" type="button"
                        (click)="insertAdvanceRowData()">
                        <span>
                            <i class="la la-plus"></i>
                            <span> Add Adv </span>
                        </span>
                    </button>
                </div>
            </div>
        </ng-container>
        <div class="col-lg-12 m--margin-top-20">
            <customer-payment-receipt-debit-list [isReadonly]="isReadonly"
                (onChangeDebit)="getListReceiptChange($event)"></customer-payment-receipt-debit-list>
            <customer-payment-receipt-credit-list [isReadonly]="isReadonly"
                (onChangeCredit)="getListReceiptChange($event)"></customer-payment-receipt-credit-list>
        </div>
    </div>
</div>