<div class="pre-alert-page">
    <app-sub-header>
        <div class="c-button-actions">
            <app-default-button [buttonSetting]="cancelButtonSetting" (onClick)="back()"></app-default-button>
        </div>
    </app-sub-header>
</div>
<div class="m-content">
    <div class="m-portlet">
        <div class="m-portlet__body">
            <form [formGroup]="formMail" class="m-form m-form--state">
                <div class="row">
                    <div class="col-md-1">
                        <div class="form-group">
                            <button class="btn btn-default m-btn--square m-btn--icon m-btn--uppercase"
                                (click)="sendMail()">
                                <i class="fa fa-envelope fa-2x" aria-hidden="true"></i>
                                <span style="margin-top: 5px;">{{sendMailButtonName}}</span>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-11">
                        <div class="row">
                            <div class="col-md-1">
                                <div class="form-group">
                                    <button style="width:54px;" type="label"
                                        class="btn btn-default m-btn--square m-btn--icon m-btn--uppercase ">
                                        from...
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group">
                                    <input class="form-control" disabled="true" formControlName="from" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-1">
                                <div class="form-group">
                                    <button style="width:54px;"
                                        class="btn btn-default m-btn--square m-btn--icon m-btn--uppercase ">
                                        to...
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group"
                                    [ngClass]="{'m-form__group has-danger': (to.dirty && !to.valid) || (isSubmited && !to.valid)}">
                                    <input class="form-control" formControlName="to" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-1">
                                <div class="form-group">
                                    <button style="width:54px;"
                                        class="btn btn-default m-btn--square m-btn--icon m-btn--uppercase ">
                                        cc...
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group"
                                    [ngClass]="{'m-form__group has-danger': (cc.dirty && !cc.valid) || (isSubmited && !cc.valid)}">
                                    <input class="form-control" formControlName="cc" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-1">
                                <div class="form-group">
                                    <button style="width:54px;" class="btn m-btn--square m-btn--icon m-btn--uppercase">
                                        subject:
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group"
                                    [ngClass]="{'m-form__group has-danger': (subject.dirty && !subject.valid) || (isSubmited && !subject.valid)}">
                                    <input class="form-control" formControlName="subject" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <div [froalaEditor]="optionEditor" formControlName="body"></div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6"></div>
        <div class="col-lg-6 m--align-right">
            <div class="">
                <button style="float:right" class="btn btn-success m-btn--square m-btn--icon m-btn--uppercase"
                    (click)="showPopup()">
                    <span>
                        <i class="la la-plus"></i>
                        <span>
                            Add Attachment...
                        </span>
                    </span></button>
            </div>
        </div>
    </div>
    <div class="m-portlet m--margin-top-10">
        <div class="alert-block__heading">
            <div class="d-flex justify-content-between align-items-center">
                <h3 class="alert-block__title">
                    Attached File
                </h3>
            </div>
        </div>
        <div class="m-portlet__body">
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group m-form__group" *ngIf="serviceId === 'AI'">
                        <div class="m-checkbox-inline">
                            <ng-container *ngIf="isExitsArrivalNotice else NotArrivalNotice">
                                <label class="m-checkbox m-checkbox--bold" style="display: initial;">
                                    <input type="checkbox" [(ngModel)]="isCheckedArrivalNotice"
                                        (change)="onChangeCheckBox()">
                                    <span></span>
                                </label>
                                <span>
                                    <a class="pointer" (click)="previewArrivalNotice()">Arrival Notice</a>
                                </span>
                            </ng-container>
                            <ng-template #NotArrivalNotice>
                                <label class="m-checkbox m-checkbox--bold m-checkbox--disabled"
                                    style="display: initial; margin-right: 40px;">
                                    <input type="checkbox" disabled="true">
                                    Arrival Notice
                                    <span></span>
                                </label>
                            </ng-template>
                        </div>

                    </div>
                    <div class="form-group m-form__group" *ngIf="serviceId === 'AE'">
                        <div class="m-checkbox-inline">
                            <ng-container *ngIf="isExitsManifest else NotManifest">
                                <label class="m-checkbox m-checkbox--bold" style="display: initial;">
                                    <input type="checkbox" [(ngModel)]="isCheckedManifest"
                                        (change)="onChangeCheckBox()">
                                    <span></span>
                                </label>
                                <span style="margin-right: 40px;"><a class="pointer"
                                        (click)="previewManifest()">Manifest</a></span>
                            </ng-container>
                            <ng-template #NotManifest>
                                <label class="m-checkbox m-checkbox--bold m-checkbox--disabled"
                                    style="display: initial; margin-right: 40px;">
                                    <input type="checkbox" disabled="true">
                                    Manifest
                                    <span></span>
                                </label>
                            </ng-template>

                            <ng-container *ngIf="isExitsMawb else NotMawb">
                                <label class="m-checkbox m-checkbox--bold" style="display: initial;">
                                    <input type="checkbox" [(ngModel)]="isCheckedMawb" (change)="onChangeCheckBox()">
                                    <span></span>
                                </label>
                                <span><a class="pointer" (click)="previewMawb()">MAWB</a></span>
                            </ng-container>
                            <ng-template #NotMawb>
                                <label class="m-checkbox m-checkbox--bold m-checkbox--disabled"
                                    style="display: initial; margin-right: 40px;">
                                    <input type="checkbox" disabled="true">
                                    MAWB
                                    <span></span>
                                </label>
                            </ng-template>
                        </div>
                    </div>

                    <div class="form-group m-form__group" *ngIf="serviceId === 'SFE' || serviceId === 'SLE'">
                        <div class="m-checkbox-inline">
                            <ng-container *ngIf="isExitsSI else NotSI">
                                <label class="m-checkbox m-checkbox--bold" style="display: initial;">
                                    <input type="checkbox" [(ngModel)]="isCheckedSI" (change)="onChangeCheckBox()">
                                    <span></span>
                                </label>
                                <span>
                                    <a class="pointer" (click)="previewSI()">S.I</a>
                                </span>
                            </ng-container>
                            <ng-template #NotSI>
                                <label class="m-checkbox m-checkbox--bold m-checkbox--disabled"
                                    style="display: initial; margin-right: 40px;">
                                    <input type="checkbox" disabled="true">
                                    S.I
                                    <span></span>
                                </label>
                            </ng-template>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12" *ngFor="let file of files; trackBy:trackByFn">
                    <div class="form-group m-form__group">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="file-item__icon">
                                    <ng-container [ngSwitch]="file.extension">
                                        <ng-container *ngSwitchCase="'pdf'">
                                            <i class="fa fa-file-pdf-o fa-2x" aria-hidden="true"></i>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'doc'">
                                            <i class="fa fa-file-doc-o fa-2x" aria-hidden="true"></i>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'xlsx'">
                                            <i class="fa fa-file-excel-o fa-2x" aria-hidden="true"></i>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'txt'">
                                            <i class="fa fa-file-text-o fa-2x" aria-hidden="true"></i>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'jpg'">
                                            <i class="fa fa-file-image-o fa-2x" aria-hidden="true"></i>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'png'">
                                            <i class="fa fa-file-image-o fa-2x" aria-hidden="true"></i>
                                        </ng-container>
                                        <ng-container *ngSwitchDefault>
                                            <i class="fa fa-file fa-2x" aria-hidden="true"></i>
                                        </ng-container>
                                    </ng-container>
                                </div>
                                <div class="file-item__name m--margin-left-20">
                                    <a [href]="file.url" target="_blank" [title]="file.name" download>{{file.name}}</a>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<add-attachment-popup (onAdd)="onAddFile($event)"></add-attachment-popup>

<ng-container *ngIf="dataReport">
    <app-report-preview [data]="dataReport"></app-report-preview>
</ng-container>

<!--General Report To PDF-->
<ng-container *ngIf="dataExportReport">
    <app-export-crystal [data]="dataExportReport"></app-export-crystal>
</ng-container>
<!--General Report To PDF-->